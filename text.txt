SELECT COUNT(*) FROM ((SELECT goods.id, goods.header, image.path, image.alt, goods.description FROM goods LEFT JOIN image ON goods.picture_id = image.id INNER JOIN section ON goods.main_section_id = section.id WHERE goods.main_section_id = :cat AND goods.product_activity = true) UNION (SELECT goods.id, goods.header, image.path, image.alt, goods.description FROM goods LEFT JOIN image ON goods.picture_id = image.id INNER JOIN sections_list ON goods.sections_id = sections_list.product_id WHERE sections_list.section_id = :cat AND goods.product_activity = true)) AS amount;
SELECT * FROM section WHERE section.id = :cat;
SELECT goods.id, goods.header, image.path, image.alt, section.name AS main_section_name FROM goods LEFT JOIN image ON goods.picture_id = image.id LEFT JOIN section ON goods.main_section_id = section.id WHERE goods.main_section_id = :cat AND goods.product_activity = true UNION SELECT goods.id, goods.header, image.path, image.alt, (SELECT section.name FROM section WHERE goods.main_section_id = section.id) AS main_section_name FROM goods LEFT JOIN image ON goods.picture_id = image.id INNER JOIN sections_list ON goods.sections_id = sections_list.product_id LEFT JOIN section ON sections_list.section_id = section.id WHERE sections_list.section_id = :cat AND goods.product_activity = true LIMIT :lastProduct, 12;
SELECT dop_picture_list.id, image.path, image.alt, (SELECT image.path FROM goods LEFT JOIN image ON goods.picture_id = image.id WHERE goods.id = :good_id) AS main_picture FROM dop_picture_list LEFT JOIN image ON dop_picture_list.image_id = image.id WHERE dop_picture_list.product_id = :good_id;
SELECT section.id, section.name, section.details, (SELECT section.name FROM goods LEFT JOIN section ON goods.main_section_id = section.id WHERE goods.id = :good_id) AS main_section, (SELECT section.id FROM goods LEFT JOIN section ON goods.main_section_id = section.id WHERE goods.id = :good_id) AS main_section_id FROM sections_list LEFT JOIN section ON sections_list.section_id = section.id WHERE sections_list.product_id = :good_id;
SELECT * FROM goods WHERE goods.id = :good_id;
SELECT goods.header FROM goods WHERE goods.id = :good_id;
SELECT section.id, section.name, section.details, count(*) AS goods_amount FROM goods INNER JOIN section ON goods.main_section_id = section.id INNER JOIN sections_list ON goods.sections_id = sections_list.product_id GROUP BY goods.main_section_id ORDER BY goods_amount DESC;